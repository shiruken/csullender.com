<!doctype html><html lang=en><head><title>Automatic Android Location Mode Toggling 2.0 · Colin Sullender</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Colin Sullender"><meta name=description content="A few months ago I had a blog post about automatically toggling Android Location Mode on my smartphone between High Accuracy and Battery Saving when using certain apps. Using the super-app Tasker and a 3rd-party plugin called Secure Settings I was able to swap the Location Mode of my Nexus 5 between the two modes. However, this was a poor solution since closing an app would result in disabling GPS access, which was undesirable if navigation was currently active."><meta name=keywords content="personal,blog,biomedical,engineer,optics,researcher"><meta name=twitter:card content="summary"><meta name=twitter:title content="Automatic Android Location Mode Toggling 2.0"><meta name=twitter:description content="A few months ago I had a blog post about automatically toggling Android Location Mode on my smartphone between High Accuracy and Battery Saving when using certain apps. Using the super-app Tasker and a 3rd-party plugin called Secure Settings I was able to swap the Location Mode of my Nexus 5 between the two modes. However, this was a poor solution since closing an app would result in disabling GPS access, which was undesirable if navigation was currently active."><meta property="og:title" content="Automatic Android Location Mode Toggling 2.0"><meta property="og:description" content="A few months ago I had a blog post about automatically toggling Android Location Mode on my smartphone between High Accuracy and Battery Saving when using certain apps. Using the super-app Tasker and a 3rd-party plugin called Secure Settings I was able to swap the Location Mode of my Nexus 5 between the two modes. However, this was a poor solution since closing an app would result in disabling GPS access, which was undesirable if navigation was currently active."><meta property="og:type" content="article"><meta property="og:url" content="https://csullender.com/posts/automatic-android-location-mode-toggling/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2014-07-24T16:14:53+00:00"><meta property="article:modified_time" content="2020-01-29T15:59:47-06:00"><link rel=canonical href=https://csullender.com/posts/automatic-android-location-mode-toggling/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.c4d7e93a158eda5a65b3df343745d2092a0a1e2170feeec909b8a89443903c6a.css integrity="sha256-xNfpOhWO2lpls980N0XSCSoKHiFw/u7JCbiolEOQPGo=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/custom.min.2db64aa52851a2640748a1b94e114ce4baba720f28653990be14c8bec384d317.css integrity="sha256-LbZKpShRomQHSKG5ThFM5Lq6cg8oZTmQvhTIvsOE0xc=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/academicons.min.min.07f5b6f18720a032cfb2eff6c582b39b2d7a288aeb4f7d65f3cb07a2bec77f0c.css integrity="sha256-B/W28YcgoDLPsu/2xYKzmy16KIrrT31l88sHor7Hfww=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5><meta name=generator content="Hugo 0.104.3"></head><body class="preload-transitions colorscheme-light"><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>Colin Sullender</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/about>About</a></li><li class=navigation-item><a class=navigation-link href=/posts>Blog</a></li><li class=navigation-item><a class=navigation-link href=/research>Research</a></li><li class=navigation-item><a class=navigation-link href=/coding>Coding</a></li><li class=navigation-item><a class=navigation-link href=/websites>Websites</a></li><li class=navigation-item><a class=navigation-link href=https://sciencegifs.csullender.com/>Science GIFs</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://csullender.com/posts/automatic-android-location-mode-toggling/>Automatic Android Location Mode Toggling 2.0</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2014-07-24T16:14:53Z>July 24, 2014</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
3-minute read</span></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/android/>Android</a></span>
<span class=separator>•</span>
<span class=tag><a href=/tags/automation/>Automation</a></span>
<span class=separator>•</span>
<span class=tag><a href=/tags/software/>Software</a></span>
<span class=separator>•</span>
<span class=tag><a href=/tags/tips-tricks/>Tips & Tricks</a></span></div></div></header><div><p>A few months ago I had <a href=/posts/automatic-high-accuracy-android-location/ title="Automatically Toggle 'High Accuracy' Location Mode on Android">a blog post</a> about automatically toggling Android Location Mode on my smartphone between <code>High Accuracy</code> and <code>Battery Saving</code> when using certain apps. Using the super-app <a href="https://play.google.com/store/apps/details?id=net.dinglisch.android.taskerm">Tasker</a> and a 3rd-party plugin called <a href="https://play.google.com/store/apps/details?id=com.intangibleobject.securesettings.plugin">Secure Settings</a> I was able to swap the Location Mode of my Nexus 5 between the two modes. However, this was a poor solution since closing an app would result in disabling GPS access, which was undesirable if navigation was currently active. Furthermore, closing an app and returning to it would result in deactivation regardless of the timing. Despite numerous suggestions in the comments, none of them provided a viable answer. Since then, I purchased a <a href=http://amzn.com/B005NLQAHS>Bluetooth OBD</a> (On-Board Diagnostic) tool to use with the very cool app <a href=https://dash.by/>Dash</a>. This device remains on at all times and the <a href="https://play.google.com/store/apps/details?id=com.dashlabs.dash.android&hl=en">Dash app</a> is set to automatically connect whenever in range. This automatic connection via Bluetooth is what makes the following modifications to my automatic Location Mode toggling task possible. In practice, any automatically-connecting Bluetooth device in your car (or part of your car) could allow you to use this technique. <strong>As before, you will need root access for Secure Settings to properly function.</strong></p><p><img src=Profile.png alt="Tasker Profile Screenshot"></p><p>Two different profiles will be utilized: One that runs when certain apps are active and another that activates when a Bluetooth connection is established. Like before, I have selected Google Maps and Waze as triggers for enabling <code>High Accuracy</code> mode. The second profile is called <strong>BT Connected</strong> and triggers when a specific Bluetooth device connects. If you use the magnifying glass you can select from your list of authorized Bluetooth connections. In my case, I selected the OBD device called OBDII.</p><p><img src=Profile_Edit.png alt="Tasker State Edit Screenshot"></p><p>As before, we&rsquo;ll be using enter and exit tasks that run whenever either profile is triggered. The two tasks I used are linked here as Tasker XML files: <a href="https://drive.google.com/file/d/0Bx3p6yyQUcUITURpNzFJZllfcjQ/edit?usp=sharing">HighAccuracy.xml</a> and <a href="https://drive.google.com/file/d/0Bx3p6yyQUcUITFo2MVVSOHNwR3M/edit?usp=sharing">BatterySaving.xml</a>. The first task enables High Accuracy mode whenever Google Maps or Waze opens or a Bluetooth connections is established with my car. The second task enables Battery Saving mode whenever those apps close or the Bluetooth connection disconnects. However, there is some fancy variable trickery that makes these two tasks work collectively.</p><p><img src=BatterySaving.png alt="Tasker Battery Profile Screenshot">
<img src=HighAccuracy.png alt="Tasker High Accuracy Profile Screenshot"></p><p>As you can see in the task screenshots above, we are using a variable named <code>GPS_ON</code> to track the current state of high accuracy mode. By setting a delay on the battery saving task, we can allow the user to briefly leave the app and then return without changing location mode. I opted for a 20s delay but any amount of time can easily be used. The task will check the status of this flag and the status of the Bluetooth connection and proceed accordingly. In order for this to work properly, you&rsquo;ll need to disable &ldquo;Enforce Task Order&rdquo; for both profiles so that the flag can be triggered on/off during app switches. If all goes according to plan, then whenever Google Maps or Waze launches or your Bluetooth device connects, then <code>High Accuracy</code> mode will be enabled. Whenever those apps close or the Bluetooth device disconnects, then the Battery Saving task will execute. After waiting 20s, if those apps are not relaunched or Bluetooth device reconnected, then <code>Battery Saving</code> mode will be enabled. This allows the user to leave the GPS-requiring app for a short amount of time and return without toggling the location mode. When connected to the Bluetooth device (my car) it keeps the GPS enabled at all times for navigation purposes.</p><p><strong>Update:</strong> <em>This process still appears to work on Android 5.0 &ldquo;Lollipop&rdquo; as long as you are using the <a href=http://www.chainfire.eu/>latest version of chainfire&rsquo;s SuperSU</a>.</em></p></div><footer><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//csullender.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></footer></article></section></div><footer class=footer><section class=container>©
2022
Colin Sullender
·
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.
[<a href=https://github.com/shiruken/csullender.com/commit/cb8cee17429b34686642cd528b0cf519b7884af2>cb8cee1</a>]</section></footer></main><script src=/js/coder.min.236049395dc3682fb2719640872958e12f1f24067bb09c327b233e6290c7edac.js integrity="sha256-I2BJOV3DaC+ycZZAhylY4S8fJAZ7sJwyeyM+YpDH7aw="></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XKMRF7KB73"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XKMRF7KB73",{anonymize_ip:!1})}</script><script async defer data-domain=csullender.com,/csullender.com src=https://p.csullender.com/js/plausible.outbound-links.js></script>
<script async defer data-website-id=d6527871-ec0b-4ff7-a839-3601a22d4549 src=https://u.csullender.com/umami.js></script>
<script>var _paq=window._paq=window._paq||[];_paq.push(["setCookieDomain","*.csullender.com"]),_paq.push(["setDomains",["*.csullender.com"]]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="https://m.csullender.com/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script><noscript><p><img src="https://m.csullender.com/matomo.php?idsite=1&rec=1" style=border:0 alt></p></noscript></body></html>